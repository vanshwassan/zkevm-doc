
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.hermez.io/zkEVM/Basic-Concepts/mFibonnaci-State-Machine-eg/">
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Multiplicative Fibonacci SM - Polygon zkEVM Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.08040f6c.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-multiplicative-fibonacci-series" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Polygon zkEVM Documentation" class="md-header__button md-logo" aria-label="Polygon zkEVM Documentation" data-md-component="logo">
      
  <img src="../../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Polygon zkEVM Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multiplicative Fibonacci SM
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hermeznetwork/zkevmdoc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Overview/Overview/" class="md-tabs__link md-tabs__link--active">
        Polygon zkEVM
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../Hermez_1.0/about/scalability/" class="md-tabs__link">
        Hermez 1.0
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Polygon zkEVM Documentation" class="md-nav__button md-logo" aria-label="Polygon zkEVM Documentation" data-md-component="logo">
      
  <img src="../../../logo-white.svg" alt="logo">

    </a>
    Polygon zkEVM Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hermeznetwork/zkevmdoc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Polygon zkEVM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Polygon zkEVM" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Polygon zkEVM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Overview/" class="md-nav__link">
        zkEVM Overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Basic Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Basic Concepts" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Basic Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Intro-zkProver%27s-Design-Approach/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Multiplicative Fibonacci SM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Multiplicative Fibonacci SM
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-multiplicative-fibonacci-series" class="md-nav__link">
    The Multiplicative Fibonacci Series
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mfibonacci-state-machine" class="md-nav__link">
    The mFibonacci State Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-polynomial-identities" class="md-nav__link">
    Building The Polynomial Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-cyclicity-of-the-mfibonacci-sm" class="md-nav__link">
    Non-cyclicity Of The mFibonacci SM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-cyclicity-into-the-mfibonacci-sm" class="md-nav__link">
    Introducing Cyclicity Into The mFibonacci SM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-computations-of-the-mfibonacci-sm" class="md-nav__link">
    Verifying Computations Of The mFibonacci SM
  </a>
  
    <nav class="md-nav" aria-label="Verifying Computations Of The mFibonacci SM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#varied-initial-conditions" class="md-nav__link">
    Varied Initial Conditions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boundary-constraints" class="md-nav__link">
    Boundary Constraints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-1-proof-elements-and-verification" class="md-nav__link">
    Example 1. (Proof Elements and Verification)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-polynomial-commitment-scheme-setting" class="md-nav__link">
    The Polynomial Commitment Scheme Setting
  </a>
  
    <nav class="md-nav" aria-label="The Polynomial Commitment Scheme Setting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commitment-scheme-protocol-an-interactive-setting" class="md-nav__link">
    Commitment Scheme Protocol (An Interactive Setting)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties-of-commitment-schemes" class="md-nav__link">
    Properties of Commitment Schemes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-proving-the-mfibonacci-sm-via-a-pcs" class="md-nav__link">
    Example 2. (Proving the mFibonacci SM via a PCS)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-mathcalh-ranged-to-mathbbf_p-ranged-identities" class="md-nav__link">
    From \({\mathcal{H}}\)-ranged to \({\mathbb{F}_p}\)-ranged Identities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proofverification-via-pil-stark" class="md-nav__link">
    Proof/Verification via PIL-STARK
  </a>
  
    <nav class="md-nav" aria-label="Proof/Verification via PIL-STARK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-stark" class="md-nav__link">
    What is a STARK?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-fri-pcs-context" class="md-nav__link">
    The FRI-PCS Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-pil" class="md-nav__link">
    What Is PIL?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiling-pil-into-json-demo" class="md-nav__link">
    Compiling PIL Into JSON (Demo)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description-of-pil-stark" class="md-nav__link">
    Description Of PIL-STARK
  </a>
  
    <nav class="md-nav" aria-label="Description Of PIL-STARK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pil-stark-preprocessing-setup-phase" class="md-nav__link">
    PIL-STARK Preprocessing ("Setup") Phase
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Preprocessing ("Setup") Phase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compilation-with-pilcom" class="md-nav__link">
    Compilation With PILCOM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-setup-executor" class="md-nav__link">
    The Setup Executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-setup" class="md-nav__link">
    PIL-STARK Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-proving-phase" class="md-nav__link">
    PIL-STARK Proving Phase
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Proving Phase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-sm-provers-executor" class="md-nav__link">
    The SM-Prover's Executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-proof-generator" class="md-nav__link">
    PIL-STARK proof Generator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-verification-phase" class="md-nav__link">
    PIL-STARK Verification Phase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-writing-boundary-constraints-for-publics" class="md-nav__link">
    Re-writing Boundary Constraints For Publics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pil-stark-implementation-demo" class="md-nav__link">
    PIL-STARK Implementation (Demo)
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Implementation (Demo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialise-a-node-project" class="md-nav__link">
    Initialise A Node Project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-input-files" class="md-nav__link">
    Create Input Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-textttexecutor" class="md-nav__link">
    Create The \(\texttt{Executor}\)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-pil-stark-proof-generator-and-verifier" class="md-nav__link">
    Create PIL-STARK Proof Generator And Verifier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../A-Generic-State-Machine/" class="md-nav__link">
        A Generic State Machine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          zkProver
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zkProver" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          zkProver
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/Overview/zkProver-Overview/" class="md-nav__link">
        zkProver Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3_2" type="checkbox" id="__nav_1_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3_2">
          States Machines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="States Machines" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_3_2">
          <span class="md-nav__icon md-icon"></span>
          States Machines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Overview/zkProver-State-Machines/" class="md-nav__link">
        State Machines Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3_2_2" type="checkbox" id="__nav_1_3_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3_2_2">
          Secondary State Machines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Secondary State Machines" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Secondary State Machines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Arithmetic/Arithmetic/" class="md-nav__link">
        Arithmetic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Storage/Storage/" class="md-nav__link">
        Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Hashing/Introduction/" class="md-nav__link">
        Hashing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Binary/Binary/" class="md-nav__link">
        Binary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Memory/Memory/" class="md-nav__link">
        Memory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Memory-Align/Memory-Align/" class="md-nav__link">
        Memory Align
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Complementary/Complementary/" class="md-nav__link">
        Complementary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zkProver/State-Machines/Secondary-State-Machines/Complementary/Configuration-File/" class="md-nav__link">
        Configuration File
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          zk Tooling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zk Tooling" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          zk Tooling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4_1" type="checkbox" id="__nav_1_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4_1">
          zkASM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zkASM" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_4_1">
          <span class="md-nav__icon md-icon"></span>
          zkASM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/zkASM/Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/zkASM/Basic-Syntax/" class="md-nav__link">
        Basic Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/zkASM/Some-Examples/" class="md-nav__link">
        Some Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/zkASM/Related-Repos/" class="md-nav__link">
        Related Repositories
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4_2" type="checkbox" id="__nav_1_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4_2">
          PIL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PIL" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_4_2">
          <span class="md-nav__icon md-icon"></span>
          PIL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Hello-World-Examples/" class="md-nav__link">
        Hello Word Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Components/" class="md-nav__link">
        Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Cyclical-Nature/" class="md-nav__link">
        Cyclical Nature
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Modularity/" class="md-nav__link">
        Modularity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Advanced-Features/" class="md-nav__link">
        Advanced Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../zk-Tooling/PIL/Related-Repos/" class="md-nav__link">
        Related Repositories
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        References
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Hermez 1.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hermez 1.0" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hermez 1.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/about/scalability/" class="md-nav__link">
        Ethereum Scalability and zk-Rollups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/about/value-proposition/" class="md-nav__link">
        Hermez Value Proposition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/about/model/" class="md-nav__link">
        Hermez Network Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/about/security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Users
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Users" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Users
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/users/hermez-wallet/" class="md-nav__link">
        Hermez Wallet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/users/mainnet/" class="md-nav__link">
        Hermez Mainnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/users/testnet/" class="md-nav__link">
        Hermez Testnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/users/exchanges/" class="md-nav__link">
        Exchanges
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Developers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/dev-guide/" class="md-nav__link">
        Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2" type="checkbox" id="__nav_2_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_2">
          Protocol
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Protocol" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          Protocol
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2_1" type="checkbox" id="__nav_2_3_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_2_1">
          Hermez zkRollup protocol
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hermez zkRollup protocol" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_3_2_1">
          <span class="md-nav__icon md-icon"></span>
          Hermez zkRollup protocol
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/protocol/hermez-protocol/protocol/" class="md-nav__link">
        Core protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/protocol/hermez-protocol/contracts/contracts/" class="md-nav__link">
        Smart contracts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/protocol/hermez-protocol/circuits/circuits/" class="md-nav__link">
        Circuits
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/protocol/consensus/consensus/" class="md-nav__link">
        Forging consensus protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/protocol/withdrawal-delayer/withdrawal-delayer/" class="md-nav__link">
        Withdrawal delayer protocol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/sdk/" class="md-nav__link">
        Examples/SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/batch-explorer/" class="md-nav__link">
        Batch Explorer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/price-updater/" class="md-nav__link">
        Hermez NodePrice Updater
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/developers/glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          FAQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FAQ" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/faq/end-users/" class="md-nav__link">
        End-Users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/faq/integrators/" class="md-nav__link">
        Integrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/faq/coordinators/" class="md-nav__link">
        Coordinators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/faq/pod/" class="md-nav__link">
        Proof of Donation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Hermez_1.0/faq/other/" class="md-nav__link">
        Other
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-multiplicative-fibonacci-series" class="md-nav__link">
    The Multiplicative Fibonacci Series
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mfibonacci-state-machine" class="md-nav__link">
    The mFibonacci State Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-polynomial-identities" class="md-nav__link">
    Building The Polynomial Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-cyclicity-of-the-mfibonacci-sm" class="md-nav__link">
    Non-cyclicity Of The mFibonacci SM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-cyclicity-into-the-mfibonacci-sm" class="md-nav__link">
    Introducing Cyclicity Into The mFibonacci SM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-computations-of-the-mfibonacci-sm" class="md-nav__link">
    Verifying Computations Of The mFibonacci SM
  </a>
  
    <nav class="md-nav" aria-label="Verifying Computations Of The mFibonacci SM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#varied-initial-conditions" class="md-nav__link">
    Varied Initial Conditions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boundary-constraints" class="md-nav__link">
    Boundary Constraints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-1-proof-elements-and-verification" class="md-nav__link">
    Example 1. (Proof Elements and Verification)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-polynomial-commitment-scheme-setting" class="md-nav__link">
    The Polynomial Commitment Scheme Setting
  </a>
  
    <nav class="md-nav" aria-label="The Polynomial Commitment Scheme Setting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commitment-scheme-protocol-an-interactive-setting" class="md-nav__link">
    Commitment Scheme Protocol (An Interactive Setting)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties-of-commitment-schemes" class="md-nav__link">
    Properties of Commitment Schemes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-proving-the-mfibonacci-sm-via-a-pcs" class="md-nav__link">
    Example 2. (Proving the mFibonacci SM via a PCS)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-mathcalh-ranged-to-mathbbf_p-ranged-identities" class="md-nav__link">
    From \({\mathcal{H}}\)-ranged to \({\mathbb{F}_p}\)-ranged Identities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proofverification-via-pil-stark" class="md-nav__link">
    Proof/Verification via PIL-STARK
  </a>
  
    <nav class="md-nav" aria-label="Proof/Verification via PIL-STARK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-stark" class="md-nav__link">
    What is a STARK?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-fri-pcs-context" class="md-nav__link">
    The FRI-PCS Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-pil" class="md-nav__link">
    What Is PIL?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiling-pil-into-json-demo" class="md-nav__link">
    Compiling PIL Into JSON (Demo)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description-of-pil-stark" class="md-nav__link">
    Description Of PIL-STARK
  </a>
  
    <nav class="md-nav" aria-label="Description Of PIL-STARK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pil-stark-preprocessing-setup-phase" class="md-nav__link">
    PIL-STARK Preprocessing ("Setup") Phase
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Preprocessing ("Setup") Phase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compilation-with-pilcom" class="md-nav__link">
    Compilation With PILCOM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-setup-executor" class="md-nav__link">
    The Setup Executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-setup" class="md-nav__link">
    PIL-STARK Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-proving-phase" class="md-nav__link">
    PIL-STARK Proving Phase
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Proving Phase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-sm-provers-executor" class="md-nav__link">
    The SM-Prover's Executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-proof-generator" class="md-nav__link">
    PIL-STARK proof Generator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pil-stark-verification-phase" class="md-nav__link">
    PIL-STARK Verification Phase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-writing-boundary-constraints-for-publics" class="md-nav__link">
    Re-writing Boundary Constraints For Publics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pil-stark-implementation-demo" class="md-nav__link">
    PIL-STARK Implementation (Demo)
  </a>
  
    <nav class="md-nav" aria-label="PIL-STARK Implementation (Demo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialise-a-node-project" class="md-nav__link">
    Initialise A Node Project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-input-files" class="md-nav__link">
    Create Input Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-textttexecutor" class="md-nav__link">
    Create The \(\texttt{Executor}\)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-pil-stark-proof-generator-and-verifier" class="md-nav__link">
    Create PIL-STARK Proof Generator And Verifier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/hermeznetwork/zkevmdoc/edit/master/docs/zkEVM/Basic-Concepts/mFibonnaci-State-Machine-eg.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>Multiplicative Fibonacci SM</h1>

<p>In this document we breakdown the complexities of the Polygon zkEVM's design in terms of a simplified example, a multiplicative Fibonacci state machine. The aim is to illustrate, in a generic sense, how the state machine approach has been implemented to realise the Polygon zkEVM.</p>
<p>Consider a proof/verification scheme, using an arbitrary Polynomial Commitment Scheme, where users have to prove knowledge of the N-th member of a multiplicative Fibonacci Series, for specific initial conditions.</p>
<h3 id="the-multiplicative-fibonacci-series">The Multiplicative Fibonacci Series</h3>
<p>The multiplicative Fibonacci Series (or simply mFibonacci Series), denoted by  <span class="arithmatex">\(\mathbf{a_0, a_1, a_2, \dots , a_n}\)</span>, has the property that the product of every two consecutive members <span class="arithmatex">\(\mathbf{a_{i-1}}\)</span> and <span class="arithmatex">\(\mathbf{a_i}\)</span> gives the value of the next member <span class="arithmatex">\(\mathbf{a_{i+1}}\)</span>. That is, <span class="arithmatex">\(\mathbf{ a_{i+1} = a_{i-1}\cdot a_i }\)</span>. And, the initial values are specified as <span class="arithmatex">\(\mathbf{a_0} = 2\)</span> and <span class="arithmatex">\(\mathbf{a_1} = 1\)</span>.</p>
<p>Here are the first ten members of the mFibonacci Series,</p>
<p>$$
\mathbf{ \ \ 2,\ \ 1,\ \ 2,\ \ 2,\ \ 4,\ \ 8,\ \ 32,\ \ 256,\ \ 8192,\ \ 2097152,\ \ \dots }
$$
As a trivial example, the challenge may be: Prove knowledge of the initial values that produced <span class="arithmatex">\(\mathbf{a_{10} = 17179869184}\)</span>, the eleventh member of the mFibonacci Series, without revealing the initial values. </p>
<p>The task therefore, is to first build a state machine that would enable anyone to prove knowledge of the initial values <span class="arithmatex">\(\mathbf{a_0}\)</span> and <span class="arithmatex">\(\mathbf{a_1}\)</span> that yields a specific N-th member of the mFibonacci Series.</p>
<h3 id="the-mfibonacci-state-machine">The mFibonacci State Machine</h3>
<p>Consider a state machine with registries <span class="arithmatex">\(\mathbf{A} = [A_0, A_1, \dots , A_T ]\)</span> and <span class="arithmatex">\(\mathbf{B} = [B_0, B_ 1, \dots , B_T]\)</span>, so that the i-th state is the pair <span class="arithmatex">\(\big( A_i , B_i \big)\)</span>.  Such a state machine is an <strong>mFibonacci state machine</strong> if indeed the registry values conform to the format of the mFibonnacci Series. See Figure 4 below, for an mFibonacci state machine with the initial conditions, <span class="arithmatex">\(A_0 = 2\)</span> and <span class="arithmatex">\(B_0 = 1\)</span>.</p>
<p><img alt="Figure 4: mFibonacci SM with two registries" src="../figures/mFibon-sm-2-regs.png" /></p>
<div align="center"><b> Figure 4: mFibonacci SM with two registries </b></div>

<p>The state transitions from <span class="arithmatex">\(\mathtt{S} = \big( A_i , B_i \big)\)</span> to <span class="arithmatex">\(\mathtt{S}' = \big( A_{i+1} , B_{i+1} \big)\)</span> conform to the following constraints,
$$
{ A_{i+1} = B_i \quad\text{ }\text{ }\text{ }  } \
{ B_{i+1} = A_i \cdot B_i }
$$
The aim here is to; express the evolution of the execution trace in terms of polynomials, build corresponding polynomial identities, and ultimately construct a ZK proof/verification scheme for our mFibonacci state machine.</p>
<h3 id="building-the-polynomial-identities">Building The Polynomial Identities</h3>
<p>The polynomials that represent the two registries are taken from the set of polynomials <span class="arithmatex">\(\mathbb{F}_p [X]\)</span>, where the coefficients are elements of a prime field <span class="arithmatex">\(\mathbb{F}_p\)</span> and <span class="arithmatex">\(p = 2^{64} − 2^{32} + 1\)</span>. The polynomials are evaluated over the subgroup <span class="arithmatex">\({\mathcal{H}} = \{ \omega, \omega^2, \omega^3, \dots , \omega^7, \omega^8 = 1 = \omega^0 \} = \langle \omega \rangle \subseteq \mathbb{F}_p^*\)</span> of order <span class="arithmatex">\(8\)</span>.</p>
<p>Define two polynomials <span class="arithmatex">\(P(X)\)</span> and <span class="arithmatex">\(Q(X)\)</span> such that</p>
<div class="arithmatex">\[
P(\omega^i) = A[i] \ \ \iff  \ \ A = [2,1,2,2,4,8,32,256]\quad\text{ }\text{ }
\]</div>
<div class="arithmatex">\[
Q(\omega^i) = B[i]  \ \ \iff \ \  B = [1,2,2,4,8,32,256,8192]
\]</div>
<p>Since every <span class="arithmatex">\(X\)</span> in <span class="arithmatex">\({\mathcal{H}}\)</span> is of the form <span class="arithmatex">\(X = \omega^i\)</span> for some <span class="arithmatex">\(i\)</span>, we have
$$
\begin{aligned}
P(X\cdot \omega) &amp;=  P(\omega^{i + 1})  =  A_{i+1}, \
Q(X\cdot \omega) &amp;= Q(\omega^{i+1})  =  B_{i+1}.
\end{aligned}
$$
The previously stated constraints, imposed on the state transitions <span class="arithmatex">\(\mathtt{S} \to \mathtt{S}'\)</span> of the mFibonacci state machine, translate into the following polynomial identities,
$$
P(X\cdot \omega) = \bigg\lvert_{\mathcal{H}}\  Q(X),\qquad\text{ }\text{ }\text{ }\text{ }  \
Q(X\cdot \omega) = \bigg\lvert_{\mathcal{H}}\  P(X) \cdot Q(X)
$$
If these polynomial identities should accurately express the two registries, then every state transition of the mFibonacci SM must satisfy them.</p>
<h3 id="non-cyclicity-of-the-mfibonacci-sm">Non-cyclicity Of The mFibonacci SM</h3>
<p>Note that the definition of <span class="arithmatex">\({\mathcal{H}}\)</span> does not restrict the values of <span class="arithmatex">\(i\)</span> to be less than <span class="arithmatex">\(8\)</span>. Even if we set <span class="arithmatex">\(i = 27\)</span>, the element  <span class="arithmatex">\(\omega^{27}\)</span>  is in <span class="arithmatex">\({\mathcal{H}}\)</span> because <span class="arithmatex">\(\ \omega^{27} = w^8 \cdot \omega^8 \cdot \omega^8 \cdot \omega^3 = 1 \cdot 1 \cdot 1 \cdot \omega^3 = \omega^3\)</span>. However, the unrestricted value of <span class="arithmatex">\(i\)</span>, which implies there is no bound on the number of state changes (i.e., on the clock), presents problems with the above polynomial identities.</p>
<p>Let's test if the polynomial identities hold true for all permissible values of <span class="arithmatex">\(i\)</span>. Let <span class="arithmatex">\(X = \omega^7\)</span> and refer to the registry values given in Figure 4.</p>
<ul>
<li>For the first identity we get, </li>
</ul>
<div class="arithmatex">\[
P(X\cdot \omega) = P(\omega^7 \cdot \omega) = P(\omega^8) = P(\omega^0) = A_0 = 2\ \ \text{ }\text{ }\\
\]</div>
<div class="arithmatex">\[
\text{ but }\ Q(X) = Q(\omega^7) = 8192 \not= 2 \qquad\qquad\qquad\qquad\quad
\]</div>
<ul>
<li>Similarly, for the second identity, we get, </li>
</ul>
<div class="arithmatex">\[
Q(X\cdot \omega) = Q(\omega^7 \cdot \omega) = Q(\omega^8) = Q(\omega^0) = B_0 = 1\ \ \text{ but } \qquad \\
\]</div>
<p>$$
P(X)\cdot Q(X) = P(\omega^7)\cdot Q(\omega^7) = 256\cdot 8192 = 2097152 \not= 1 \quad
$$
Clearly, the polynomial identities are not aligned with the registry values of the mFibonacci SM. The reason for this disparity is that, whereas <span class="arithmatex">\(H\)</span> is cyclic, the polynomial identities are not.</p>
<h3 id="introducing-cyclicity-into-the-mfibonacci-sm">Introducing Cyclicity Into The mFibonacci SM</h3>
<p>In order to inject some cyclicity into the the mFibonacci SM, we add a third registry <span class="arithmatex">\(\mathbf{C} = [C_1, C_2, \dots , C_T]\)</span> and set the registry values to <span class="arithmatex">\(\mathbf{C} = [0, 0, \dots , 0, 1]\)</span>. So the mFibonacci SM is now as depicted in Figure 5 below.</p>
<p><img alt="" src="../figures/mFibon-sm-3-regs.png" /></p>
<div align="center"><b> Figure 5: mFibonacci SM with three registries </b></div>

<p>The corresponding polynomial <span class="arithmatex">\(R(x)\)</span> is defined as follows,
$$
R(\omega^i) = C[i]
$$
That is, 
$$
\begin{aligned}
R(\omega^i) = C[i] = 1, \text{ if } \ \ (i+1)\mod 8 = 0 \
\end{aligned}
$$
$$
R(\omega^i) = C[i] = 0, \text{ otherwise}
$$</p>
<p>The polynomial <span class="arithmatex">\(R(x)\)</span> is incorporated into the previous polynomial identities as follows,
$$
P(X \cdot \omega) = \bigg\lvert_{\mathcal{H}}\ \ 
 Q(X) \cdot \big( 1 − R(X) \big) + R(X)\cdot  A_0 
\quad\quad\text{ }\text{ }\text{ } \
$$
$$
Q(X\cdot \omega) = \bigg\lvert_{\mathcal{H}}\ \ 
(1 − R(X)) \cdot P(X)\cdot Q(X) + R(X)\cdot B_0
$$</p>
<p>Note that, for all the states where the new registry <span class="arithmatex">\(C[i] = 0\)</span>, these new identities coincide with the previous ones (where only registries <span class="arithmatex">\(A\)</span> and <span class="arithmatex">\(B\)</span> were used).</p>
<p>These polynomial identities can be rewritten as,
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] + R(X)\cdot \big[ P(X \cdot \omega) − A_0 \big] = \bigg\lvert_{\mathcal{H}}\ 0\quad\text{ }\text{ }\text{ }
$$
$$
(1 − R(X)) · [Q(Xω) − (P(X) · Q(X))] + R(X)\cdot [Q(Xω) − B_0] = \bigg\lvert_{\mathcal{H}}\ 0
$$</p>
<p>Let's check if these identities are cyclic. Again, let <span class="arithmatex">\(X = \omega^7\)</span> and use the registry values given in Figure 5.</p>
<ul>
<li>For the first identity, we observe that,</li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
\text{LHS} = P(X\cdot \omega) = P(\omega^7 \cdot \omega) = P(\omega^8) = P(\omega^0) = A_0 = 2\ \ \text{ and } \\
\end{aligned}
\]</div>
<div class="arithmatex">\[
\text{RHS} =  Q(X)\cdot \big( 1 − R(X) \big) + R(X)\cdot A_0\
=\ Q(\omega^7)\cdot \big( 1 − 1 \big) + 1\cdot 2 = 2 = \text{LHS}
\]</div>
<ul>
<li>Similarly, for the second identity, we observe that, </li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
\text{LHS} &amp;= Q(X\cdot \omega) = Q(\omega^7 \cdot \omega) = Q(\omega^8) = Q(\omega^0) = B_0 = 1 \ \ \text{ and } \text{ and } \\
\text{RHS} &amp;= (1 − R(X)) \cdot P(X)\cdot Q(X) + R(X)\cdot B_0 \\
&amp;= (1 − 1) \cdot P(\omega^7)\cdot Q(\omega^7) + 1\cdot 1 = 0 + 1 = \text{LHS}
\end{aligned}
\]</div>
<p>These polynomial identities enforce correct state transitioning, and are therefore referred to as <em>transition constraints</em>. They apply to every pair of consecutive states. That is, every pair of consecutive rows in the execution trace of the SM.</p>
<h2 id="verifying-computations-of-the-mfibonacci-sm">Verifying Computations Of The mFibonacci SM</h2>
<p>In addition to transition constraints, are <em>boundary constraints</em>. A <strong>boundary constraint</strong> is a constraint that enforces that a polynomial has a certain value at a particular root of unity.</p>
<h3 id="varied-initial-conditions">Varied Initial Conditions</h3>
<p>Note that instead of being restricted to the given initial conditions <span class="arithmatex">\(\big( A_0 , B_0 \big) = \big( 2 , 1 \big)\)</span>, the mFibonacci state machine together with its polynomial identities can be adjusted to any initial conditions <span class="arithmatex">\(\big( A_0 , B_0 \big)\)</span>.</p>
<p>For example, for <span class="arithmatex">\(A_0 = 23\)</span> and <span class="arithmatex">\(B_0 = 46\)</span>, the constraints should be;
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] + R(X)\cdot \big[ P(X \cdot \omega) − 23 \big] = \bigg\lvert_{\mathcal{H}}\ 0\quad\text{ }\text{ }\text{ }
$$
$$
(1 − R(X)) · [Q(Xω) − (P(X) · Q(X))] + R(X)\cdot [Q(Xω) − 46] = \bigg\lvert_{\mathcal{H}}\ 0
$$</p>
<p>In the context of our mFibonacci SM, the verifier can set the initial conditions $\big( A_0 , B_0 \big) $ to values of his or her own choice, and generate the state machine while keeping <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span> secret. The prover's task is therefore, to prove knowledge of <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span> that led to a given N-th term of the mFibonacci Series.</p>
<h3 id="boundary-constraints">Boundary Constraints</h3>
<p>Boundary constraints apply to particular registry values, and are used to enforce that the correct initial state was applied.</p>
<p>The idea here is to set up a specific boundary constraint, which the verifier can use to check that correct initial conditions were applied, when the prover was computing a particular N-th term of the mFibonacci Series. Yet, the verifier must not disclose any information about the secret values <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span>.</p>
<p>Therefore, the first thing to do, is removing terms in the identities bearing the initial values <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span>. This means modifying our polynomial identities to the ones below,
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] = \bigg\lvert_{\mathcal{H}}\ 0\qquad\text{ }\text{ }\text{ }
$$
$$
(1 − R(X)) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \bigg\lvert_{\mathcal{H}}\ 0
$$</p>
<p>Secondly, knowing that <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span> yield the <span class="arithmatex">\(k\)</span>-th term <span class="arithmatex">\(A_{k-1} = P(\omega^{k-1}) =: \mathcal{K}\)</span>, the verifier adds the boundary constraint,
$$
P(\omega^{k-1}) = \mathcal{K}
$$
In other words, the prover has to provide three polynomials <span class="arithmatex">\(P(X)\)</span>, <span class="arithmatex">\(Q(X)\)</span>, <span class="arithmatex">\(P(X\omega)\)</span> and <span class="arithmatex">\(Q(X\omega)\)</span> together with the correct <span class="arithmatex">\(k\)</span>-th term. The verifier then tests if these polynomials conform to the above constraints. If all three constraints are satisfied, then the prover knows the correct initial values <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span>.</p>
<p>This logic is valid simply because the computations carried out by the state machine are deterministic by nature.</p>
<h3 id="example-1-proof-elements-and-verification">Example 1. (Proof Elements and Verification)</h3>
<p>All computations are carried out in a field <span class="arithmatex">\(\mathbb{F}_p\)</span> , where <span class="arithmatex">\(p = \mathtt{2^{64}-2^{32}+1}\)</span>, a Goldilocks-like prime number.</p>
<p>Suppose the verifier knows that an mFibonacci Series starting with initial values, <span class="arithmatex">\(A_0\)</span> and <span class="arithmatex">\(B_0\)</span>, yields <span class="arithmatex">\(A_{\mathtt{1023}} = \mathtt{14\ 823\ 897\ 298\ 192\ 278\ 947}\)</span> as the value of the <span class="arithmatex">\(\mathtt{1024}\)</span>-th term. The verifier can challenge anyone to prove knowledge of the initial condition of the mFibonacci SM to provide three polynomials and the correct <span class="arithmatex">\(\mathtt{1024}\)</span>-th term. That is, the verifier uses the following constraints to verify the prover's submissions; 
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] = \bigg\lvert_H\ 0\qquad\quad\text{ }\text{ }\text{ }
\
$$
$$
\big(1 − R(X)\big) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \bigg\lvert_H\ 0\text{ }
\
$$</p>
<div class="arithmatex">\[
\big(P(\omega^{\mathtt{1023}}) - \mathcal{K} \big)\cdot R(X) = 0\quad\text{ }\text{ }
\]</div>
<p>Anyone who knows the three polynomials and the correct initial conditions, say <span class="arithmatex">\(A_0 = 234\)</span> and <span class="arithmatex">\(B_0 = 135\)</span>, can simply run the mFibonacci SM code to compute <span class="arithmatex">\(A_{\mathtt{1023}} = P(\omega^{\mathtt{1023}})\)</span>. See Figure 6 below for the .js code.</p>
<p><img alt="" src="../figures/code-eg-mfibo-exec-trace.png" /></p>
<div align="center"><b> Figure 6: Code Example of the mFibonacci SM's Computation Trace </b></div>

<h2 id="the-polynomial-commitment-scheme-setting">The Polynomial Commitment Scheme Setting</h2>
<p>The framework for the proof/verification system of our mFibonacci SM is a Polynomial Commitment Scheme. The mechanism for proving correctness of the computations carried out by the mFibonacci SM (or, any state machine in the zkEVM setting), is best described in terms of an interactive zero-knowledge proof system. One therefore thinks of the proof/verification system as an interaction of two parties, traditionally called the <em>Verifier</em> and the <em>Prover</em>.</p>
<p>In practice though, the so-called <strong>Fiat-Shamir transformation</strong> is used to turn such interactive schemes into non-interactive ones.</p>
<h3 id="commitment-scheme-protocol-an-interactive-setting">Commitment Scheme Protocol (An Interactive Setting)</h3>
<p>In the case of our mFibonacci state machine, the Prover needs to commit to the polynomials <span class="arithmatex">\(P(X)\)</span>, <span class="arithmatex">\(Q(X)\)</span> <span class="arithmatex">\(P(X\omega)\)</span> and <span class="arithmatex">\(Q(X\omega)\)</span>, and the Verifier will request the Prover to evaluate these polynomials at randomly selected points (i.e., field elements).</p>
<p>The general protocol, in an interactive setting, is as follows;</p>
<ol>
<li>The Prover commits to a polynomial or a number of polynomials, using a specified polynomial commitment scheme.</li>
<li>The Verifier randomly selects one or more field elements, which she sends <em>one at a time</em> to the Prover as <strong>challenges</strong>. That is, the Verifier requests the Prover to provide evaluations (called <strong>openings</strong>) of the committed polynomials at these <em>randomly selected</em> field elements.</li>
<li>This <em>back and forth</em> interaction can occur as many times as the number of openings the Verifier deems sufficient to guarantee soundness.  </li>
<li>The Verifier uses relevant polynomial constraints to test veracity of the Prover's openings.</li>
</ol>
<p>If all the relevant constraints hold true, then the Verifier accepts that the Prover has knowledge of the correct polynomials <span class="arithmatex">\(P(X)\)</span>, <span class="arithmatex">\(Q(X)\)</span>, <span class="arithmatex">\(P(X\omega)\)</span> and <span class="arithmatex">\(Q(X\omega)\)</span>.</p>
<h3 id="properties-of-commitment-schemes">Properties of Commitment Schemes</h3>
<p>For all practical purposes, such the constructed proof/verification system needs to be secure. That is, it must have several cryptographic properties. The most crucial properties are; being <em>hiding</em> and <em>binding</em>, as well as <em>soundness</em> and <em>completeness</em>.</p>
<p>(a) <strong>Binding</strong> means users are able to commit to values but once committed, it should be impossible for users to change or repudiate their committed values. The committed values are called <strong>commitments</strong>.</p>
<p>(b) <strong>Hiding</strong> literally means users can commit to values without revealing the actual values, and it should be infeasible for anyone else to deduce the actual values.</p>
<p>(c) <strong>Openness</strong> means, given a challenge <span class="arithmatex">\(\alpha\)</span> , the prover can generate a verifiable proof such that <span class="arithmatex">\(P(\alpha) = y\)</span>.</p>
<p>(c) <strong>Soundness</strong> has to do with whether it is infeasible for the adversarial prover to convince the verifier to accept invalid proofs (or commitments). A proof system is <strong>sound</strong> if the probability for the verifier to accept a false proof is less than a third, <span class="arithmatex">\(\Big( \text{probability} &lt; \dfrac{1}{3} \Big)\)</span>. In other words, the soundness property of a proof system requires that any proof created from a false <strong>witness</strong> should not be convincing to the verifier.</p>
<p>(d) A proof system has <strong>completeness</strong> if every valid proof is convincing and acceptable to a verifier.</p>
<p>Proof systems based on testing polynomial identities take advantage of a basic property of polynomials expressed by the <a href="Lemma 1.6, https://courses.cs.washington.edu/courses/cse521/17wi/521-lecture-7.pdf"><strong>Schwartz-Zippel Lemma</strong></a>.</p>
<p><span class="arithmatex">\(\text{Let } {Q(X_1, . . . , X_n)} \text{ be a nonzero polynomial of } {n} \text{ variables with degree } {d}, \text{ and } {S} \text{ be a finite but}\)</span> <span class="arithmatex">\(\text{sufficiently large subset of the field } {\mathbb{F}}. \text{ If we assign } { X_1, . . . , X_n } \text{ values from } {S} \text{ independently and }\)</span> <span class="arithmatex">\(\text{uniformly at random, then } {Pr[Q(X_1, . . . , X_n) = 0] ≤ \dfrac{d}{|S|}}.\)</span></p>
<p>Here's what the Schwartz-Zippel Lemma means in the proof/verification system of our mFibonacci state machine:</p>
<p>​   If the verifier selects the challenges <span class="arithmatex">\(\{ \alpha_1, \alpha_2 . . . , \alpha_l \}\)</span> randomly and uniformly, then the probability of the prover finding a false polynomial <span class="arithmatex">\({Q'}\)</span> of degree <span class="arithmatex">\(d\)</span>, such that <span class="arithmatex">\({Q'(\alpha_j) = 0 = Q(\alpha_j)}\)</span> for all <span class="arithmatex">\(j \in \{ 1, 2, \dots , l \}\)</span> , is at most <span class="arithmatex">\({\dfrac{d}{|S|}}\)</span>, which is very small.</p>
<p>This speaks of the soundness of our polynomial commitment scheme.</p>
<h3 id="example-2-proving-the-mfibonacci-sm-via-a-pcs">Example 2. (Proving the mFibonacci SM via a PCS)</h3>
<p>Suppose the prover has to prove knowledge of the initial values of the mFibonacci Series that yields the <span class="arithmatex">\(1024\)</span>-th term, <span class="arithmatex">\(A_{1023} = \mathtt{14\ 823\ 897\ 298\ 192\ 278\ 947}\)</span>. Suppose a certain polynomial commitment scheme (PCS) is used to facilitate proving and verification.</p>
<p>In a typical commitment scheme, the following  protocol is followed;</p>
<p>(a) The prover commits to the polynomials <span class="arithmatex">\(P(X)\)</span> and <span class="arithmatex">\(Q(X)\)</span>.</p>
<p>(b) The verifier selects a random point <span class="arithmatex">\(\alpha\)</span>, sends it to the prover, with a request for relevant <em>openings</em>.</p>
<p>(c) The prover then provides the openings; <span class="arithmatex">\(P(\alpha)\)</span>, <span class="arithmatex">\(P(\omega \alpha)\)</span>, <span class="arithmatex">\(Q(\alpha)\)</span> and <span class="arithmatex">\(Q(\omega \alpha)\)</span>.</p>
<p>(d) The verifier can check correctness of the openings, by using transition constraints,
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] = \bigg\lvert_{\mathcal{H}}\ 0\qquad\quad\text{ }\text{ }\text{ }\text{ }
$$</p>
<div class="arithmatex">\[
\big(1 − R(X)\big) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \bigg\lvert_{\mathcal{H}}\ 0\text{ }\text{ }
\]</div>
<p>(e) In order to enable the verifier to check the boundary constraint, 
$$
P(\omega^{\mathtt{1023}}) = \mathtt{14\ 823\ 897\ 298\ 192\ 278\ 947}\qquad\qquad
$$
the prover must send a witness <span class="arithmatex">\(\large{\mathtt{w}}\)</span> as proof that he or she knows the correct value of the <span class="arithmatex">\(1024\)</span>-th term, without disclosing the actual value <span class="arithmatex">\(A_{1023} = \mathtt{14\ 823\ 897\ 298\ 192\ 278\ 947}\)</span>.</p>
<p>(f) The verifier then uses a formula, which is specific to the commitment scheme in use and it takes the witness as an input, to check whether the prover has computed the correct <span class="arithmatex">\(A_{1023}\)</span>.</p>
<p>Note that the prover does not provide any values concerning the constant polynomial <span class="arithmatex">\(R(X)\)</span>, because this is known to both the prover and the verifier.</p>
<p>Any PCS such as <a href="https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf">KZG</a> or <a href="https://link.springer.com/content/pdf/10.1007%2F3-540-46766-1_9.pdf">FRI-based</a> can be used to efficiently prove correctness of computations of our mFibonacci state machine.</p>
<h3 id="from-mathcalh-ranged-to-mathbbf_p-ranged-identities">From <span class="arithmatex">\({\mathcal{H}}\)</span>-ranged to <span class="arithmatex">\({\mathbb{F}_p}\)</span>-ranged Identities</h3>
<p>Let's look carefully at the constraints of the mFibonacci state machine;
$$
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] = \bigg\lvert_{\mathcal{H}}\ 0\qquad\quad\text{ }\text{ }\text{ }\text{ }
$$
$$
\big(1 − R(X)\big) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \bigg\lvert_{\mathcal{H}}\ 0\text{ }\text{ }
$$</p>
<div class="arithmatex">\[
\big(P(\omega^{\mathtt{T}}) - \mathcal{K} \big)\cdot R(X) = \bigg\lvert_{\mathcal{H}}\ 0\quad\text{ }\text{ }\quad\qquad\quad\quad\qquad\text{ }\text{ }\text{ }
\]</div>
<p>where  <span class="arithmatex">\(\mathtt{T}+1\)</span>  is the number of rows in the execution trace and <span class="arithmatex">\(\mathcal{K}\)</span> is an evaluation of <span class="arithmatex">\(P(X)\)</span> at <span class="arithmatex">\(\omega^{\mathtt{T}}\)</span>, corresponding to the value of the registry <span class="arithmatex">\(\mathtt{A}\)</span> in the <span class="arithmatex">\((\mathtt{T}+1)\)</span>-st state, when specific initial values <span class="arithmatex">\(\mathtt{A}_0\)</span> and <span class="arithmatex">\(\mathtt{B}_0\)</span> are used in the state machine.</p>
<p>The problem with the transition constraints, as presented above, is that they hold true only for <span class="arithmatex">\(X \in \mathcal{H}\)</span>, and not necessarily for <span class="arithmatex">\(X \in \mathbb{F}_p\)</span>. Note that the left-hand sides of the polynomial identities are but polynomials, which can be labelled <span class="arithmatex">\(p_1(X)\)</span>, <span class="arithmatex">\(p_2(X)\)</span> and <span class="arithmatex">\(p_3(X)\)</span>. That is,
$$
p_1(X) =\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] =  \bigg\lvert_{\mathcal{H}}\ 0\qquad\quad\text{ }\text{ }\text{ }\text{ } \
$$</p>
<div class="arithmatex">\[
p_2(X) = \big(1 − R(X)\big) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \bigg\lvert_{\mathcal{H}}\ 0\text{ }\text{ }\\
\]</div>
<div class="arithmatex">\[
p_3(X) = \big(P(\omega^{\mathtt{T}}) - \mathcal{K} \big)\cdot R(X)  = \bigg\lvert_{\mathcal{H}}\ 0\quad\text{ }\text{ }\text{}\quad\qquad\qquad\qquad\text{ }
\]</div>
<p>Define the so-called <em>vanishing polynomial</em> on <span class="arithmatex">\(\mathcal{H}\)</span>, denoted by <span class="arithmatex">\(\mathtt{Z}_{\mathcal{H}}(X)\)</span>, as the monomial of maximal degree such that <span class="arithmatex">\(\mathtt{Z}_{\mathcal{H}}(X) = 0\)</span> for all <span class="arithmatex">\(X \in \mathcal{H}\)</span>. Therefore, 
$$
\mathtt{Z}_{\mathcal{H}}(X) = (X-1)\cdot(X-\omega)\cdot(X-\omega^2)\cdots(X-\omega^{n-1}) = X^{n} - 1
$$
Since  <span class="arithmatex">\(p_i(X) = 0\)</span>  for all  <span class="arithmatex">\(X \in \mathcal{H} = \{ \omega, \omega^2, \omega^3, \dots , \omega^n = 1 \}\)</span>, then
$$
p_i(X)\ =\ \big((X-1)\cdot(X-\omega)\cdot(X-\omega^2)\cdots(X-\omega^{n-1})\big)\cdot q_i(X)\ =\ \big( X^{n} - 1 \big) \cdot q_i(X)
$$
for some quotient polynomial <span class="arithmatex">\(q_i(X)\)</span>, for each <span class="arithmatex">\(i \in \{ 1, 2, 3 \}\)</span>.</p>
<p>The polynomial identities of our mFibonacci state machine can therefore be rewritten as </p>
<div class="arithmatex">\[
\big( 1 − R(X) \big) \cdot \big[ P(X\cdot \omega) − Q(X) \big] = \mathtt{Z}_{\mathcal{H}}(X)\cdot q_1(X) \qquad\quad\text{ }\text{ }\text{ }\text{ } \\
\]</div>
<div class="arithmatex">\[
\big(1 − R(X)\big) · [Q(X\cdot \omega) − (P(X) · Q(X))] = \mathtt{Z}_{\mathcal{H}}(X)\cdot q_2(X) \text{}\text{ }\\
\]</div>
<div class="arithmatex">\[
\big(P(\omega^{\mathtt{T}}) - \mathcal{K} \big)\cdot R(X) = \mathtt{Z}_{\mathcal{H}}(X)\cdot q_3(X) \qquad\text{}\text{}\quad\qquad\qquad\qquad\text{ }
\]</div>
<p>The representatives <span class="arithmatex">\(R(X)\)</span> and <span class="arithmatex">\(Z_{\mathcal{H}}(X)\)</span> in the PCS, can be preprocessed and be made public (i.e., known to both the Prover and the Verifier). The Verifier can check specific openings of these polynomials, <span class="arithmatex">\(R(X)\)</span> and <span class="arithmatex">\(Z_{\mathcal{H}}(X)\)</span>.</p>
<h2 id="proofverification-via-pil-stark">Proof/Verification via PIL-STARK</h2>
<p>The zkEVM's basic proof system for proving correctness of all state machine computations is a <strong>STARK</strong>. The fundamental configuration is: the zkEVM utilises STARK proofs for proving correctness of computations, due to their speed; but in order to attain succinct verification, these STARK proofs are in turn proved with a single <strong>SNARK</strong>. So, the zkProver employs STARK proofs internally, while the publicised validity proofs are SNARKs.</p>
<h3 id="what-is-a-stark">What is a STARK?</h3>
<p>A <a href="https://eprint.iacr.org/2018/046.pdf"><strong>STARK</strong></a> is a <strong>S</strong>calable <strong>T</strong>ransparent <strong>AR</strong>gument of <strong>K</strong>nowledge based on the <a href="https://www.iacr.org/archive/tcc2016b/99850156/99850156.pdf">Interactive Oracle Proof</a> (IOP) model. Although a STARK is not adequately succinct, as a proof system, it is generally categorised as a special <a href="https://eprint.iacr.org/2011/443.pdf"><strong>SNARK</strong></a> (which is short for <strong>S</strong>uccinct <strong>N</strong>on-interactive <strong>AR</strong>gument of <strong>K</strong>nowledge).</p>
<p><strong>Succinctness</strong> here, refers to producing short proofs that are independent of the size of the <em>witness</em>, and thus enabling NP computations to be proved with substantially lower complexity than it is classically required, [<a href="zk-SNARKs: A Gentle Introduction, https://www.di.ens.fr/~nitulesc/files/Survey-SNARKs.pdf">AN2019</a>]. In other words, an argument system for NP statements is succinct, if its communication complexity is polylogarithmic in the the size of the statement or the witness.</p>
<p>A STARK falls short of succinctness because, although verifier arithmetic complexity is <em>strictly logarithmic</em> with respect to statement or witness size, prover arithmetic complexity is <em>strictly linear</em>, [<a href="Page 14, https://eprint.iacr.org/2018/046.pdf">BBHR18</a>]. Yet, a STARK is <strong>scalable</strong> because it has at most a polylogarithmic prover overhead, and it is <strong>transparent</strong> as it requires no trusted setup.</p>
<p>See the table below, taken from the presentation <a href="https://docs.google.com/presentation/d/1gfB6WZMvM9mmDKofFibIgsyYShdf0RV_Y8TLz3k1Ls0/edit#slide=id.g443ebc39b4_0_110">here</a>, for a quick comparison of proofs sizes, prover and verification times, between STARKs, SNARKs and <a href="https://eprint.iacr.org/2017/1066.pdf">Bulletproofs</a>.</p>
<div align="center"><b> Table 1: Comparison of Proof Sizes, Proof and Verification Times </b></div>

<p><img alt="Table 1: Comparison of Proof Sizes, Proof and Verification Times" src="../figures/stark-prf-sizes-times.png" /></p>
<h3 id="the-fri-pcs-context">The FRI-PCS Context</h3>
<p>The performance of a STARK is ascribable to the context in which it is deployed, the <strong>FRI</strong> Polynomial Commitment Scheme (or FRI-PCS). The acronym <a href="https://drops.dagstuhl.de/opus/volltexte/2018/9018/pdf/LIPIcs-ICALP-2018-14.pdf"><strong>FRI</strong></a> is short for <strong>F</strong>ast <strong>R</strong>eed-Solomon <strong>I</strong>nteractive Oracle Proof of Proximity, also abbreviated as "<strong>F</strong>ast <strong>R</strong>S-<strong>I</strong>OPP".</p>
<p>On a high-level, FRI enables proving whether a given function <span class="arithmatex">\(f : {\mathcal{H}} \to \mathbb{F}_p\)</span> is “close” to a certain polynomial of low degree. Hence the term <em>proof of proximity</em>.</p>
<p>Loosely put, the FRI protocol allows for a random set of queries (requests for openings of polynomials at randomly selected field elements), used by the verifier to ascertain with high probability, the prover's knowledge of a committed polynomial.</p>
<p>FRI is in fact a Merkle commitment scheme where commitments are roots of Merkle trees, and therefore needs no trusted setup, as it only uses hash functions.</p>
<p>The FRI protocol is considered fast for several reasons;</p>
<ul>
<li>Firstly, due to its resemblance of the ubiquitous Fast Fourier Transforms (FFTs). </li>
<li>Secondly, the arithmetic complexity of the prover is strictly linear.</li>
<li>Thirdly, the size of the proof is O(n log(n)). </li>
<li>And fourthly, the arithmetic complexity of the verifier is strictly logarithmic.</li>
</ul>
<p>Our special implementation of a STARK is called <strong>PIL-STARK</strong>, and its polynomial commitment scheme (PCS) is also based on the FRI protocol. We will later demonstrate how PIL-STARK is used to prove the polynomial identities of the mFibonacci state machine. </p>
<p>Before describing PIL-STARK a quick look at the novel Polynomial Identities Language (PIL), and some of its distinguishing features, will be helpful.</p>
<h3 id="what-is-pil">What Is PIL?</h3>
<p><strong>PIL</strong> is a domain-specific language (DSL) that provides a method for naming polynomials and describing the identities that define computations carried out by a state machine. </p>
<p>A typical <span class="arithmatex">\(\texttt{.pil}\)</span> file for a given state machine specifies the details of the computation that the state machine carries out; </p>
<ul>
<li>the size (or degree) of the polynomials. i.e., the number of rows of the execution trace.</li>
<li>the namespace of the state machine, which becomes a prefix to names of the SM's polynomials.</li>
<li>defines the <span class="arithmatex">\(\texttt{ISLAST}\)</span> polynomial as a constant (preprocessed) polynomial.</li>
<li>defines committed polynomials; <span class="arithmatex">\(\texttt{a}\)</span> and <span class="arithmatex">\(\texttt{b}\)</span>.</li>
<li>the zero-checks of the transition constraints.</li>
<li>and, a zero-check of the boundary constraint.</li>
</ul>
<p>In cases where several state machines are being proved; although each SM may have a polynomial named "ISLAST", there would be no name-clashes in the Prover (and in the Verifier) because each polynomial is identified by prefixing its name with the namespace of the SM it belongs to. For example, <span class="arithmatex">\(\texttt{mFibonacci.ISLAST}\)</span> is the identifier of ISLAST where the mFibonacci SM has the namespace <span class="arithmatex">\(\texttt{mFibonacci}\)</span>.</p>
<p>See Figure 7 below, for a description of the mFibonacci SM in PIL, as an <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file.</p>
<p><img alt="Figure 7: The .pil file of the mFibonacci State Machine" src="../figures/pil-eg-mfibonacci.png" /></p>
<div align="center"><b> Figure 7: The .pil file of the mFibonacci State Machine </b></div>

<p>The value of the polynomial <span class="arithmatex">\(\mathtt{a}\)</span> in the next step (or state) of the state machine, is denoted by <span class="arithmatex">\(\mathtt{a'}\)</span> and it is read "a"-prime. i.e., If <span class="arithmatex">\(\mathtt{a = P(\omega^i)}\)</span> then <span class="arithmatex">\(\mathtt{a' = P(\omega^{i+1})}\)</span>.</p>
<p>Note that the current version of the PIL language only accepts degree-two expressions. That is, a single multiplication such as <span class="arithmatex">\(\texttt{(a-1)*a}\)</span> and <span class="arithmatex">\(\texttt{a*b}\)</span>, but not <span class="arithmatex">\(\texttt{(a-1)*b*c}\)</span>.</p>
<p>The extra line, <span class="arithmatex">\(\text{line 8}\)</span> in Figure 7, was added for the very reason, to prevent the double multiplication required in the zero-check
$$
\mathtt{(1-ISLAST) * (b' - (a*b)) = 0;}
$$
by splitting it into two steps, <span class="arithmatex">\(\text{line 8}\)</span> and <span class="arithmatex">\(\text{line 11}\)</span>.</p>
<p>A fuller description of PIL has been documented <a href="">here</a>.</p>
<h3 id="compiling-pil-into-json-demo">Compiling PIL Into JSON (Demo)</h3>
<p>Due to the modular design of the zkProver, it is possible to take a <span class="arithmatex">\(\texttt{.pil}\)</span> file describing computations of any state machine and compile it into a parsed version, a <span class="arithmatex">\(\texttt{.json}\)</span> file, that can be interpreted by the other software components.</p>
<p>We demonstrate compiling the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file into a <span class="arithmatex">\(\texttt{.json}\)</span> file with a novel Polynomial Identities Language Compiler, dubbed <span class="arithmatex">\(\texttt{PILCOM}\)</span>. The details of <span class="arithmatex">\(\texttt{PILCOM}\)</span> will be documented elsewhere, but its repo can be found <a href="https://github.com/0xPolygonHermez/pilcom">here</a>. We treat it as a 'blackbox' in this demonstration.</p>
<p>Here's how to achieve the compilation of the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file;</p>
<ol>
<li>
<p>Clone the <span class="arithmatex">\(\texttt{PILCOM}\)</span> <a href="https://github.com/0xPolygonHermez/pilcom">repo</a>, 
   $$
   \texttt{git clone https://github.com/0xPolygonHermez/pilcom}
   $$</p>
</li>
<li>
<p>Once cloned, switch directory to <span class="arithmatex">\(\texttt{pilcom/}\)</span>, and install the module,
   $$
   \mathtt{pilcom$} \texttt{ npm install}\quad\text{}
   \
   $$
   and build the parser,<br />
   $$
   \mathtt{pilcom$} \texttt{ npm run build}\text{}\
   $$</p>
</li>
<li>
<p>Type the lines of code, the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span>, into your code editor as it appears in Figure 7 above. You will need to Save it in some temporary folder. Whatever filename you give to the file, remember to use the "<span class="arithmatex">\(\texttt{.pil}\)</span>" extension.
  In our case, we saved it in a folder named  <span class="arithmatex">\(\texttt{myproject}\)</span>, and named the file  <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span></p>
</li>
<li>
<p>Compile the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> either at the <span class="arithmatex">\(\texttt{pilcom}\)</span> directory or the <span class="arithmatex">\(\texttt{pilcom/src}\)</span> subdirectory, using the command,
   $$
   \mathtt{pilcom$} \texttt{ node src/pil.js myproject/mfibonacci.pil -o myproject/mfibonacci.pil.json }\qquad\qquad\qquad\qquad\text{ }\
   $$
   or 
   $$
   \mathtt{pilcom/src$ } \texttt{ node pil.js myproject/mfibonacci.pil -o myproject/mfibonacci.pil.json}\
   \text{ }
   $$
   You might need to prefix the path "<span class="arithmatex">\(\texttt{myproject/mfibonacci.pil}\)</span>" with "~/" </p>
</li>
<li>
<p>If successful, the output report (printed in the terminal) looks like this, <img alt="PILCOM Result For mFibonacci SM" src="../figures/pilcom-res-mfibon.png" /> </p>
</li>
</ol>
<p>It provides information on the number of polynomials used (both constant and committed), the number of polynomial identities to be checked, and other information pertaining to the number of identities checked with; <span class="arithmatex">\(\texttt{Plookup}\)</span> tables, <span class="arithmatex">\(\texttt{Permutation}\)</span> checks and <span class="arithmatex">\(\texttt{Connection}\)</span> checks.</p>
<ol>
<li>The <span class="arithmatex">\(\texttt{.json}\)</span> file that <span class="arithmatex">\(\texttt{PILCOM}\)</span> produces has the name speciified in Step 4, and can be found in the folder (subdirectory) specified in Step 4.</li>
</ol>
<p>In our case, the <span class="arithmatex">\(\texttt{.json}\)</span> file produced by <span class="arithmatex">\(\texttt{PILCOM}\)</span> appears in the "MYPROJECT" folder as <span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span> and its content looks like this (Well, after removing the many newlines),</p>
<p><img alt="Contents of the {} fibonacci.pil.json file" src="../figures/inside-parsed-pil-file77.png" /></p>
<p>The <span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span> file contains much more detail than the results seen in Step 5 above. For instance, it reflects the polynomial names prefixed with the state machine namespace <span class="arithmatex">\(\texttt{mFibonacci}\)</span> as stipulated to in the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file. </p>
<p>Each polynomial is further described with four (4) attributes; </p>
<p>(a)  <span class="arithmatex">\(\texttt{type}\)</span> which specifies whether the polynomial is committed, constant or intermediate.</p>
<p>(b)  <span class="arithmatex">\(\texttt{id}\)</span> is a unique identity associated to with the polynomial</p>
<p>(c)  <span class="arithmatex">\(\texttt{polDeg}\)</span> reflects the degree of the polynomial</p>
<p>(d) <span class="arithmatex">\(\texttt{isArray}\)</span> is a flag used to control array-based polynomial definitions.</p>
<p>Among all the contents of the <span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span> file, there is a key called <span class="arithmatex">\(\texttt{expressions}\)</span> which is an array containing all the identities and operations among the corresponding polynomials.</p>
<p>Moreover, the <span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span> file contains other keys representing all inclusion, permutation and copy constraint arguments.</p>
<p>Other fields, important for debugging purposes, are
    (a)  <span class="arithmatex">\(\texttt{nCommitments}\)</span>: which specifies the total number of committed polynomials.
    (b) <span class="arithmatex">\(\texttt{Constants}\)</span>: which specifies the total number of constant polynomials referenced in the PIL file.</p>
<h2 id="description-of-pil-stark">Description Of PIL-STARK</h2>
<p>Simply put, <strong>PIL-STARK</strong> is a special STARK that enables; the state machine Prover (SM-Prover) to generate a <strong>STARK</strong> proofs for a State Machine written in <strong>PIL</strong>, and the state machine Verifier (SM-Verifier) to verify the STARK-proofs provided by the Prover. Hence there is a PIL-STARK component in the SM-Prover which is the <strong>Generator</strong> of a STARK proof, and another PIL-STARK component in the SM-Verifier which is the actual <strong>Verifier</strong> of the STARK proof.</p>
<p>Since the SM-Prover and the SM-Verifier, who are separate and independent entities, require certain PIL-STARK parameters prior to proving and verification, the system needs some preprocessing phase. Call this phase, the "<strong>Setup</strong>" Phase.</p>
<p>The PIL-STARK proof/verification process therefore consists of three (3) phases; the Setup, the Proving and the Verification. These are outlined below.</p>
<h3 id="pil-stark-preprocessing-setup-phase">PIL-STARK Preprocessing ("Setup") Phase</h3>
<p>The Setup Phase can be thought of as consisting of three 'components'; the <span class="arithmatex">\(\texttt{PILCOM}\)</span>, the Setup <span class="arithmatex">\(\texttt{Executor}\)</span> and the <span class="arithmatex">\(\texttt{PIL-STARK Setup}\)</span>.</p>
<h4 id="compilation-with-pilcom">Compilation With PILCOM</h4>
<p>The novel compiler, called <span class="arithmatex">\(\texttt{PILCOM}\)</span>, which is used for compiling a <span class="arithmatex">\(\texttt{.pil}\)</span> file into a parsed <span class="arithmatex">\(\texttt{.json}\)</span> file, is part of the Setup Phase of PIL-STARK. The compilation of the <span class="arithmatex">\(\texttt{.pil}\)</span> file into a parsed <span class="arithmatex">\(\texttt{.json}\)</span> file therefore happens in this phase of the PIL-STARK proof/verification process.</p>
<h4 id="the-setup-executor">The Setup Executor</h4>
<p>The <span class="arithmatex">\(\texttt{Setup Executor}\)</span> takes as input the PIL <span class="arithmatex">\(\texttt{.json}\)</span> file from <span class="arithmatex">\(\texttt{PILCOM}\)</span> in order to compute the evaluations of the state machine's constant polynomials. For each state machine, described by the <span class="arithmatex">\(\texttt{.pil}\)</span> file compiled with <span class="arithmatex">\(\texttt{PILCOM}\)</span>, the execution process is carried out only once.</p>
<h4 id="pil-stark-setup">PIL-STARK Setup</h4>
<p>The PIL-STARK Setup takes as inputs; the PIL <span class="arithmatex">\(\texttt{.json}\)</span> file from <span class="arithmatex">\(\texttt{PILCOM}\)</span>, the evaluations of the constant polynomials from the <span class="arithmatex">\(\texttt{Setup}\)</span> <span class="arithmatex">\(\texttt{Executor}\)</span>, and the STARK configuration information in the form of a <span class="arithmatex">\(\texttt{starkstruct.json}\)</span> file. It then creates a Merkle tree with the evaluations of all the constant polynomials, called the <span class="arithmatex">\(\texttt{constTree}\)</span></p>
<p>It outputs PIL-STARK parameters; the <span class="arithmatex">\(\texttt{constTree}\)</span> which is a Merkle Tree of evaluations of the constant polynomials, the <span class="arithmatex">\(\texttt{starkInfo}\)</span> which is a STARK-specific information, and the <span class="arithmatex">\(\texttt{constRoot}\)</span> which is the root of the <span class="arithmatex">\(\texttt{constTree}\)</span>.</p>
<p>Overall, the Setup Phase of PIL-STARK takes as inputs; the <span class="arithmatex">\(\texttt{.pil}\)</span> file describing the state machine and STARK-specific parameters. Its outputs are; the evaluations of the constant polynomials, the <span class="arithmatex">\(\texttt{constTree}\)</span>, the <span class="arithmatex">\(\texttt{starkInfo}\)</span>, the <span class="arithmatex">\(\texttt{constRoot}\)</span>, as well as the PIL <span class="arithmatex">\(\texttt{.json}\)</span> file from <span class="arithmatex">\(\texttt{PILCOM}\)</span>.</p>
<p>We emphasise that the Setup Phase of PIL-STARK is run only once for a particular <span class="arithmatex">\(\texttt{.pil}\)</span> file describing the state machine. A change in the <span class="arithmatex">\(\texttt{.pil}\)</span> file means a fresh Setup needs to be executed.</p>
<p><img alt="Figure _ : PIL-STARK Setup" src="../figures/pil-stark-in-setup.png" /></p>
<div align="center"><b> Figure 8: The Setup Phase of PIL-STARK </b></div>

<h3 id="pil-stark-proving-phase">PIL-STARK Proving Phase</h3>
<p>The Proving Phase consists of two main components; the <span class="arithmatex">\(\texttt{SM-Prover}\)</span> <span class="arithmatex">\(\texttt{Executor}\)</span> and the PIL-STARK proof <span class="arithmatex">\(\texttt{Generator}\)</span>.</p>
<h4 id="the-sm-provers-executor">The SM-Prover's Executor</h4>
<p>The executor in the SM-Prover's takes as inputs; the PIL <span class="arithmatex">\(\texttt{.json}\)</span> file from <span class="arithmatex">\(\texttt{PILCOM}\)</span> and another <span class="arithmatex">\(\texttt{.json}\)</span> file of inputs, called <span class="arithmatex">\(\texttt{input.json}\)</span> . In the case of our mFibonacci SM, the inputs in <span class="arithmatex">\(\texttt{input.json}\)</span> includes the initial values of the registries <span class="arithmatex">\(\texttt{A}\)</span> and <span class="arithmatex">\(\texttt{B}\)</span>.</p>
<p>The SM-Prover's Executor builds the values of polynomials that are to be committed. Its output is the evaluations of the committed polynomials, per proof. These evaluations of committed polynomials are actually the SM's execution trace.</p>
<p>Note that the input values in the <span class="arithmatex">\(\texttt{input.json}\)</span> file can be varied without altering the actual state machine. The reason the state machine remains intact is due to fact that the <span class="arithmatex">\(\texttt{.pil}\)</span> file, that was initially compiled in the Setup phase, is not affected by any change in the input values of the SM-Prover's Executor.</p>
<p>However, with every set of inputs, the SM-Prover's Executor computes corresponding evaluations of the committed polynomials to be used in generating the respective STARK proof. In other words, each new set of inputs determines a new set of evaluations, which in turn determines the STARK proof generated by the PIL-STARK Generator.</p>
<h4 id="pil-stark-proof-generator">PIL-STARK proof Generator</h4>
<p>This STARK Proof Generator takes as inputs; the the evaluations of the of committed polynomials from the SM-Prover's Executor, the evaluations of the constant polynomials from the Setup Phase, together with the <span class="arithmatex">\(\texttt{constTree}\)</span> and the <span class="arithmatex">\(\texttt{starkInfo}\)</span>.</p>
<p>This is where the evaluations of the committed polynomials, from the SM-Prover's Executor, are Merkelized. And all elements of the ultimate STARK proof are generated, these include; the witness and the required openings of the committed polynomials. </p>
<p>The output of the STARK Proof Generator is a <span class="arithmatex">\(\texttt{STARK}\)</span> <span class="arithmatex">\(\texttt{proof}\)</span> and the <span class="arithmatex">\(\texttt{publics}\)</span>, which are values to be publicised.</p>
<p>For the PIL-STARK Proving Phase as a whole, also as depicted in Figure 9 below, </p>
<ul>
<li>there are five (5) inputs; the <span class="arithmatex">\(\texttt{input.json}\)</span> file, the PIL <span class="arithmatex">\(\texttt{.json}\)</span> file from <span class="arithmatex">\(\texttt{PILCOM}\)</span>, the evaluations of the constant polynomials from the Setup Phase, as well as the <span class="arithmatex">\(\texttt{constTree}\)</span> and the <span class="arithmatex">\(\texttt{starkInfo}\)</span>.</li>
<li>and there are two (2) outputs; a <span class="arithmatex">\(\texttt{STARK}\)</span> <span class="arithmatex">\(\texttt{proof}\)</span> and the <span class="arithmatex">\(\texttt{publics}\)</span>.</li>
</ul>
<p><img alt="Figure _ : PIL-STARK in SM-Prover" src="../figures/pil-stark-in-prover.png" /></p>
<div align="center"><b> Figure 9: The Proving Phase of PIL-STARK </b></div>

<h3 id="pil-stark-verification-phase">PIL-STARK Verification Phase</h3>
<p>The Verification Phase is constituted by the PIL-STARK Verifier. </p>
<p>As it is common practice amongst zero-knowledge proof/verification systems, the size of the Verifier's inputs is very small compared to that of the Prover's inputs. For example, while the Proving Phase takes the whole <span class="arithmatex">\(\texttt{constTree}\)</span> as one of its inputs, the Verifier takes the <span class="arithmatex">\(\texttt{constRoot}\)</span> instead.</p>
<p>The inputs to the Verifier are; the <span class="arithmatex">\(\texttt{STARK}\)</span> <span class="arithmatex">\(\texttt{proof}\)</span> and the <span class="arithmatex">\(\texttt{publics}\)</span> from the Prover, together with the <span class="arithmatex">\(\texttt{starkInfo}\)</span> and the <span class="arithmatex">\(\texttt{constRoot}\)</span> from the Setup Phase.</p>
<p>And the Verifier's output is either an <span class="arithmatex">\(\texttt{Accept}\)</span> if the proof is accepted, or a <span class="arithmatex">\(\texttt{Reject}\)</span> if the proof is rejected.</p>
<p><img alt="Figure _ : PIL-STARK in the SM-Verifier" src="../figures/pil-stark-in-verifier.png" /></p>
<div align="center"><b> Figure 9: The Verification Phase of PIL-STARK </b></div>

<p>PIL-STARK is, all-in-all, a specific implementation of a STARK that can be used as a generic tool for proving state machines' polynomial identities.</p>
<p>The actual implementation of PIL-STARK uses recursion. That is, hundreds of STARK proofs are proved with another STARK proof, and these STARK proofs of other STARK proofs are also proved with a single STARK proof. This achieves exponential scalability than it would otherwise be possible.</p>
<p>The code for implementing PIL-STARK is found in the zkEVM repository <a href="https://github.com/0xPolygonHermez/pil-stark">here</a>.</p>
<h2 id="re-writing-boundary-constraints-for-publics">Re-writing Boundary Constraints For Publics</h2>
<p>As seen in the description of PIL-STARK, one of the outputs of the SM-Prover is the <span class="arithmatex">\(\texttt{publics}\)</span>, which are publicly known values. However, looking back at our demonstration, where the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file was compiled with <span class="arithmatex">\(\texttt{PILCOM}\)</span>, you will notice that the <span class="arithmatex">\(\texttt{publics}\)</span> field in the parsed <span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span> file is empty. Check <span class="arithmatex">\(\text{line 6}\)</span> in the provided snapshot of the "<span class="arithmatex">\(\texttt{\{ \} fibonacci.pil.json}\)</span>" file, and notice it reads thus:
$$
\texttt{"publics": [],}
$$
This is so, because no <span class="arithmatex">\(\texttt{publics}\)</span> were defined in the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file that we compiled. This can also be checked in Figure 7 above.</p>
<p>Again, you'll notice that the 1024-th value of the polynomial <span class="arithmatex">\(\texttt{a}\)</span> was hardcoded as <span class="arithmatex">\(\mathtt{144115188042301440}\)</span> in <span class="arithmatex">\(\texttt{line}\)</span> <span class="arithmatex">\(\texttt{13}\)</span>, which checks the boundary constraint:
$$
\mathtt{ISLAST*(a - 144115188042301440) = 0;}
$$
This is undesirable because any change in the initial conditions would yield a wrong proof, which the Verifier would reject.</p>
<p>The aim in this subsection is to therefore, rewrite the boundary constraint in the <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file such that, instead of hardcoding this public value, it is rather generically defined. So, <span class="arithmatex">\(\mathtt{144115188042301440}\)</span>, is replaced with a public <em>variable</em> called "<span class="arithmatex">\(\texttt{out}\)</span>". The new <em>variable</em> must be declared, and it is defined as,
$$
\textbf{public} \texttt{ out = a(\%N - 1);}
$$
The modified boundary constraint check in  <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> now looks like this,
$$
\texttt{ISLAST*(a - :out) = 0;}
$$
where the ":" colon-prefix indicates a read of the value stored at <span class="arithmatex">\(\texttt{out}\)</span>.</p>
<p>The modified <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file, before compilation with <span class="arithmatex">\(\texttt{PILCOM}\)</span>, is now as follows,</p>
<p><img alt="mFibonacci.pil file with &quot;publics&quot;" src="../figures/mfib-pil-w-pubs.png" /></p>
<div align="center"><b> Figure 10: mFibonacci.pil file with "publics" </b></div>

<p>This modified <span class="arithmatex">\(\texttt{mFibonacci.pil}\)</span> file can be compiled with <span class="arithmatex">\(\texttt{PILCOM}\)</span> in the manner demonstrated earlier. The resulting parsed PIL file,  "<span class="arithmatex">\(\texttt{\{ \} mfibonacci.pil.json}\)</span>", now reflects some information in the "<span class="arithmatex">\(\texttt{publics}\)</span>" field, as shown here:</p>
<p><img alt="A non-empty &quot;publics&quot; field the parsed PIL file " src="../figures/non-empt-pubs-field.png" /></p>
<h2 id="pil-stark-implementation-demo">PIL-STARK Implementation (Demo)</h2>
<p>Next, is a demonstration of how PIL-STARK is implemented. Again, you are encouraged to Do-It-Yourself, by following the steps provided in here.</p>
<h3 id="initialise-a-node-project">Initialise A Node Project</h3>
<p>The first step is to make a new subdirectory named <span class="arithmatex">\(\mathtt{mfibonacci\_sm}\)</span>, switch directory to it and initialise a node project as indicated below,
$$
\texttt{ npm init -y }
$$
A successful initialisation looks like this:</p>
<p><img alt="Successful node initialisation" src="../figures/init-node-project.png" /> </p>
<p>Next, install the required dependencies with the following command,
$$
\texttt{ npm install pil-stark yargs chai }
$$
The installation takes seconds, and again the results looks like this,</p>
<p><img alt="Installed dependencies" src="../figures/dependncs-install-mfib.png" /></p>
<h3 id="create-input-files">Create Input Files</h3>
<p>First of all, the overall inputs to PIL-STARK are; the <span class="arithmatex">\(\texttt{.pil}\)</span> file describing the mFibonacci state machine, the STARK configuration <span class="arithmatex">\(\texttt{.json}\)</span> file and the inputs <span class="arithmatex">\(\texttt{.json}\)</span> file, which contains initial values of the mFibonacci state machine.</p>
<ul>
<li>Either move the modified version of the <span class="arithmatex">\(\texttt{mfibonacci.pil}\)</span> file to the <span class="arithmatex">\(\mathtt{mfibonacci\_sm}\)</span> subdirectory, or create a new file afresh at this subdirectory. Call it <span class="arithmatex">\(\texttt{mfibonacci.pil}\)</span>. That is, copy the text below to the new file. Save the file.</li>
</ul>
<pre><code class="language-pil">  // mfibonacci.pil
  constant %N = 1024;
  namespace mFibonacci(%N);
    pol constant ISLAST; // 0,0,0,0,.....,1 
    pol commit a, b;
    pol ab = a*b;
  // publics
    public out = a(%N-1);
  // transition constraints
    (1-ISLAST) * (a' - b) = 0;
    (1-ISLAST) * (b' - (ab)) = 0;
  // boundary constraint
    ISLAST*(a-:out)=0;
</code></pre>
<ul>
<li>Next, create a new file and call it <span class="arithmatex">\(\texttt{mfib.starkstruct.json}\)</span>. Copy the code-text shown below, into this JSON file, and save it.</li>
</ul>
<pre><code class="language-json">  // text{mfib.starkstruct.json}
  {
    &quot;nBits&quot;: 10,
    &quot;nBitsExt&quot;: 11,
    &quot;nQueries&quot;: 8, 
    &quot;verificationHashType&quot;: &quot;GL&quot;, 
    &quot;steps&quot;: [
        {&quot;nBits&quot;: 11}, 
      {&quot;nBits&quot;: 7}, 
      {&quot;nBits&quot;: 3}
    ]
  }
</code></pre>
<ul>
<li>Create a new file and call it  <span class="arithmatex">\(\texttt{mfib.input.json}\)</span>. Populate this JSON file with the initial values of the mFibonacci state machine of your choice (the numbers must be positive integers). We use here <span class="arithmatex">\(\texttt{[ 234, 135 ]}\)</span>. Simply type the 2-element array in the  <span class="arithmatex">\(\texttt{mfib.input.json}\)</span> file and save it.</li>
</ul>
<h3 id="create-the-textttexecutor">Create The <span class="arithmatex">\(\texttt{Executor}\)</span></h3>
<p>In our earlier description of PIL-STARK, the <span class="arithmatex">\(\texttt{Executor}\)</span> was 'split' into the <span class="arithmatex">\(\texttt{Setup} \texttt{ executor}\)</span> and the <span class="arithmatex">\(\texttt{Prover } \texttt{executor}\)</span>. This was done for simplicity's sake. The two <span class="arithmatex">\(\texttt{executors}\)</span> are but one program that generates the evaluations of the constant polynomial, as well as the evaluations of the committed polynomials.</p>
<p>Create a new file and call it  <span class="arithmatex">\(\mathtt{executor\_mfibonacci.js}\)</span>. Copy the code-text shown below, into this <span class="arithmatex">\(\texttt{.js}\)</span> file and save it in the <span class="arithmatex">\(\mathtt{mfibonacci\_sm}\)</span> subdirectory.</p>
<pre><code class="language-js">// executor_mfibonacci.js
const { FGL } = require(&quot;pil-stark&quot;);

module.exports.buildConstants = async function (pols) {
    const N = 1024;
    for ( let i=0; i&lt;N; i++) { 
    pols.ISLAST[i] = (i == N-1) ? 1n : 0n;}
    }

module.exports.execute = async function (pols, input) { 
  const N = 1024;
    pols.a[0] = BigInt(input[0]);
    pols.b[0] = BigInt(input[1]); 
  for(let i=1; i&lt;N; i++){
        pols.a[i] = pols.b[i-1];
        pols.b[i] = FGL.mul(pols.a[i-1], pols.b[i-1]);
    }
    return pols.a[N-1];
}
</code></pre>
<h3 id="create-pil-stark-proof-generator-and-verifier">Create PIL-STARK Proof Generator And Verifier</h3>
<p>Finally, create the PIL-STARK proof generator and verifier by creating a new file (using a code editor) and name it <span class="arithmatex">\(\mathtt{mfib\_gen\_and\_prove.js}\)</span>. </p>
<p>Copy the code-text shown below, into this <span class="arithmatex">\(\mathtt{mfib\_gen\_and\_prove.js}\)</span> file and save it in the <span class="arithmatex">\(\mathtt{mfibonacci\_sm}\)</span> subdirectory.</p>
<pre><code class="language-js">const { FGL, starkSetup, starkGen, starkVerify } = require(&quot;pil-stark&quot;);
const { newConstantPolsArray, newCommitPolsArray, compile, verifyPil } = require(&quot;pilcom&quot;);
const path = require(&quot;path&quot;);

// Files
const pilFile = path.join(__dirname, &quot;mfibonacci.pil&quot;);
const input = require(&quot;./mfib.input.json&quot;);
const mFibExecutor = require(&quot;./executor_mfibonacci&quot;);
const starkStruct = require(&quot;./mfib.starkstruct.json&quot;);

async function generateAndVerifyPilStark() {
    // Generate constants (preprocessed)
    const pil = await compile(FGL, pilFile);
    const constPols = newConstantPolsArray(pil);
    const cmPols = newCommitPolsArray(pil);
    await mFibExecutor.buildConstants(constPols.mFibonacci);
    const executionResult = await mFibExecutor.execute(cmPols.mFibonacci, input); 
    console.log(executionResult);
    // Generate trace
    const evaluationPilResult = await verifyPil(FGL, pil, cmPols , constPols); 
    if (evaluationPilResult.length != 0) {
        console.log(&quot;Abort: the execution trace generated does not satisfy the PIL description!&quot;); 
        for (let i=0; i &lt; evaluationPilResult.length; i++) {
          console.log(pilVerificationResult[i]); } return;
        } else { 
          console.log(&quot;Continue: execution trace matches the PIL!&quot;); }
    // Setup for the stark
    const setup = await starkSetup(constPols, pil, starkStruct);
    // Generate the stark
    const proverResult = await starkGen(cmPols,constPols,setup.constTree,setup.starkInfo);
    // Verify the stark
    const verifierResult= await starkVerify(proverResult.proof, proverResult.publics, setup.constRoot,setup.starkInfo);

    if (verifierResult === true) { console.log(&quot;VALID proof!&quot;);
     } else { console.log(&quot;INVALID proof!&quot;); }
}

generateAndVerifyPilStark();

</code></pre>
<p>Run the <span class="arithmatex">\(\mathtt{mfib\_gen\_and\_prove.js}\)</span> code:
$$
\mathtt{node } \texttt{ mfib_gen_and_prove.js}
$$
After a long reporting on all the checks made, a successful STARK generation and its verification is indicated with a "<span class="arithmatex">\(\texttt{VALID proof!}\)</span>" message. If you used different filenames from ours, you might have to do some light debugging.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../Intro-zkProver%27s-Design-Approach/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        
        <a href="../A-Generic-State-Machine/" class="md-footer__link md-footer__link--next" aria-label="Next: A Generic State Machine" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              A Generic State Machine
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://t.me/polygonhermez" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/hermeznetwork/zkevmdoc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://hermez.io/" target="_blank" rel="noopener" title="hermez.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M0 3.75C0 2.784.784 2 1.75 2h20.5c.966 0 1.75.784 1.75 1.75v16.5A1.75 1.75 0 0 1 22.25 22H1.75A1.75 1.75 0 0 1 0 20.25V3.75zm1.75-.25a.25.25 0 0 0-.25.25V5.5h4v-2H1.75zM7 3.5v2h4v-2H7zm5.5 0v2h10V3.75a.25.25 0 0 0-.25-.25H12.5zm10 3.5h-21v13.25c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>